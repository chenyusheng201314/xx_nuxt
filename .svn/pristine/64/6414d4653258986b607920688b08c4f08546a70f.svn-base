webpackJsonp([22,139,140,141],{"/+O7":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"local-router"},[s("div",{staticClass:"route"},[e._v("当前位置：")]),e._l(e.route,function(t,a){return s("div",{key:a,staticClass:"cursor-pointer route-data"},[t.path?s("a",{attrs:{href:t.path}},[e._v("\n      "+e._s(t.name)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:a!==e.route.length-1,expression:"index !== route.length-1"}]},[e._v(" >  ")])]):s("a",[e._v(e._s(t.name)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:a!==e.route.length-1,expression:"index !== route.length-1"}]},[e._v(" >  ")])])])})],2)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};t.a=i},"46m6":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"catalogue",props:["lesson_mulu","is_get","c_index","s_index"],data:function(){return{ewm_show:!1}},methods:{view:function(){}}}},"BQ/V":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"introduction-tab",props:["lesson_tab","change_tab"],methods:{tab_change:function(e){(0,this.change_tab)(e)}}}},EIYo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("BQ/V"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);var r=s("Zk0r"),c=s("VU/8")(i.a,r.a,!1,null,null,null);c.options.__file="pages\\class\\introduce-tab.vue",t.default=c.exports},FV4R:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Y0tu"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);var r=s("KpHV"),c=s("VU/8")(i.a,r.a,!1,null,null,null);c.options.__file="pages\\class\\introduce.vue",t.default=c.exports},HdIP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("46m6"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);var r=s("wuc7"),c=s("VU/8")(i.a,r.a,!1,null,null,null);c.options.__file="pages\\class\\catalogue.vue",t.default=c.exports},KpHV:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"introduce"},[s("div",{staticClass:"introduce-left",domProps:{innerHTML:e._s(e.info.description)}}),s("div",{staticClass:"introduce-right"},[s("ul",{staticClass:"teacher_introduce"},[s("li",{staticClass:"cursor-pointer abotu-tacher"},[s("nuxt-link",{attrs:{to:"/teacher/"+e.teacher_info.id}},[s("p",{staticClass:"li-tit"},[e._v("讲师介绍")]),s("div",{staticClass:"teacher_header"},[s("img",{staticStyle:{"border-radius":"50%","-webkit-border-radius":"50%","-ms-border-radius":"50%","-moz-border-radius":"50%","-o-border-radius":"50%"},attrs:{src:e.teacher_info.photo_small,alt:"",width:"128",height:"128"}})]),s("p",{staticClass:"teacher_name"},[e._v(e._s(e.teacher_info.realname))]),s("p",{staticClass:"teacher_name",staticStyle:{"margin-top":"0px"}},[e._v(e._s(e.teacher_info.realname_en))]),s("p",{staticClass:"teacher_con",domProps:{innerHTML:e._s(e.teacher_info.introduction)}}),e._l(e.teacher_info.organization_teacher_tags.slice(0,4),function(t,a){return s("div",{key:a,staticClass:"teacher_tips"},[e._v(e._s(t.name)+"\n          ")])})],2)],1),s("li",[s("p",{staticClass:"li-tit"},[e._v("主讲课程")]),e._l(e.other_lesson,function(t,a){return s("div",{key:a,staticClass:"about-lesson"},[s("a",{attrs:{href:"/class/"+t.id}},[s("img",{attrs:{src:t.cover,alt:"",width:"270"}}),s("p",{staticClass:"about-tit"},[e._v(e._s(t.course_name))])])])})],2)]),s("div",{staticClass:"teacher_project"},[s("p",{staticClass:"li-tit li-tit-project"},[e._v("参与过的项目")]),e._l(e.tea_case,function(t,a){return s("div",{key:a,staticClass:"project_list"},[s("a",{attrs:{href:"/case/"+t.cases_id}},[s("img",{attrs:{src:t.organization_cases.organization_small_logo,alt:"",width:"270"}}),s("p",{staticClass:"text-overflow-two pr-name"},[e._v(e._s(t.organization_cases.title))])])])})],2)])])};a._withStripped=!0;var i={render:a,staticRenderFns:[]};t.a=i},MGbg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(s("Xxa5")),i=u(s("exGp")),n=u(s("zpg7")),r=u(s("EIYo")),c=u(s("FV4R")),o=u(s("HdIP"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"detail",components:{localRoute:n.default,IntroduceTab:r.default,Introduce:c.default,Catalogue:o.default},data:function(){return{ewm_show:!1,player:null,c_index:0,s_index:0,free_index:0,time:0,timer:0,submit_data:{numChange:1,title:"",price_type:2,price:0},pay_data:{my_money:0,my_points:0,price_total:0,num:1,type:0},lesson_tab:1}},asyncData:function(){var e=(0,i.default)(a.default.mark(function e(t){var s,i,n,r,c,o,u,l,d,p=t.store,_=t.params;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.dispatch("httpGet",{url:"/app/course/course_detail",data:{course_id:_.id}});case 2:return s=e.sent,e.next=5,p.dispatch("httpGet",{url:"/home/teacher/info",data:{id:s.data.organization_teacher.id}});case 5:return i=e.sent,e.next=8,p.dispatch("httpGet",{url:"/home/teacher/course",data:{teacher_id:s.data.organization_teacher.id,psize:5,page:1}});case 8:return n=e.sent,e.next=11,p.dispatch("httpGet",{url:"/home/organization_cases/list",data:{teacher_id:s.data.organization_teacher.id,psize:5,page:1}});case 11:for(u in r=e.sent,console.log("课程 ",s,"老师",i.data,"其他课程",n.data.data,"老师案例",r),console.log("课程章节 ",s.data.chapters[0]),c=[],o=s.data.chapters,u=0,l=0,d=0,o)for(l in o[u].course_section)1===o[u].course_section[l].app_free&&c.push({c:Number(u),s:Number(l)}),d=l+1;return e.abrupt("return",{route_data:[{name:"享学科技网",path:"/"},{name:"课程分类",path:"/class/list"},{name:"课程详情",path:""}],course:s.data,app_free:c,section_num:d,teacher_info:i.data,other_lesson:n.data.data,tea_case:r.data.data});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),head:function(){return{title:this.course.course_name,meta:[{hid:"keywords",name:"keywords",content:this.course.course_name},{hid:"description",name:"description",content:this.course.course_name}],link:[{href:"https://g.alicdn.com/de/prismplayer/2.7.2/skins/default/aliplayer-min.css",rel:"stylesheet",type:"text/css"},{href:"/css/class.css",type:"text/css",rel:"stylesheet"}],script:[{src:"https://g.alicdn.com/de/prismplayer/2.7.2/aliplayer-flash-min.js"}]}},watch:{time:function(){var e=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},methods:{get_auth:function(){var e=(0,i.default)(a.default.mark(function e(t){var s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("httpPost",{url:"/common/video/GetVideoPlayAuth",data:{videoid:t}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),play_init:function(){var e=(0,i.default)(a.default.mark(function e(t,s,i){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.next=3,this.get_auth(i);case 3:r=e.sent,this.player=new Aliplayer({id:"J_prismPlayer",vid:i,playauth:r.PlayAuth,cover:r.CoverURL,width:"100%",height:"100%",autoplay:!(0===t&&0===s),playsinline:!1,preload:!1,useFlashPrism:!0,isLive:!1,controlBarVisibility:"click",showBarTime:5e3},function(e){e.off("play",function(){clearInterval(n.timer),n.time=0}),e.on("play",function(){clearInterval(n.timer),n.timer=setInterval(function(){n.time+=1},1e3)}),e.off("pause",function(){}),e.on("pause",function(){clearInterval(n.timer);var t=n.course.chapters[n.c_index].course_section[n.s_index].media_time;n.progress(n.c_index,n.s_index,e.getCurrentTime(),t)}),e.off("waiting",function(){clearInterval(n.timer)}),e.on("waiting",function(){}),e.off("ended",n.next),e.on("ended",n.next)});case 5:case"end":return e.stop()}},e,this)}));return function(t,s,a){return e.apply(this,arguments)}}(),play_first:function(){var e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),next:function(){var e=(0,i.default)(a.default.mark(function e(){var t,s,i,n,r,c,o,u=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("下一个",this.c_index,this.s_index),this.course.is_get?(t=this.course.chapters[this.c_index].course_section[this.s_index].media_time,this.progress(this.c_index,this.s_index,t,t),0,s=this.s_index+1,i=this.course.chapters[this.c_index+1]&&this.course.chapters[this.c_index+1].course_section[0].video_id,s<this.course.chapters[this.c_index].course_section.length?this.course.chapters[this.c_index].course_section[s].video_id:i?(this.player.dispose(),$("#J_prismPlayer").empty(),this.play_init(this.c_index+1,0,i),this.c_index+=1,this.s_index=0):this.$message({message:"没有可播放的视频了~",type:"warning"})):(0,(n=this.free_index+1)<this.app_free.length&&this.course.chapters[this.app_free[n].c].course_section[this.app_free[n].s].video_id),r=0,(c=this.free_index+1)<this.app_free.length&&(r=this.course.chapters[this.app_free[c].c].course_section[this.app_free[c].s].video_id),!r){e.next=13;break}return e.next=8,this.get_auth(r);case 8:o=e.sent,this.player.replayByVidAndPlayAuth(r,o.PlayAuth),setTimeout(function(){u.player.play(),u.free_index+=1,u.c_index=u.app_free[c].c,u.s_index=u.app_free[c].s},500),e.next=14;break;case 13:this.app_free.length===this.section_num?this.$message({message:"请购买后观看~",type:"info"}):(this.course.is_get,this.$message({message:"请购买后观看~",type:"warning"}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),select:function(){var e=(0,i.default)(a.default.mark(function e(t,s,i,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.course.is_get||t?(this.c_index=s,this.s_index=i,this.player.dispose(),$("#J_prismPlayer").empty(),this.play_init(s,i,n)):this.$message({message:"请购买后观看~",type:"warning"});case 1:case"end":return e.stop()}},e,this)}));return function(t,s,a,i){return e.apply(this,arguments)}}(),progress:function(){var e=(0,i.default)(a.default.mark(function e(t,s,i,n){var r,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.course.is_get){e.next=11;break}return e.next=3,axios({method:"post",url:this.apiUrl+"/api/v1/app/course/person_course_playlog_add",headers:{token:this.$store.state.userInfo.token},data:{course_id:this.course.id,chapter_id:this.course.chapters[t].chapter_id,section_id:this.course.chapters[t].course_section[s].section_id,play_long:i,section_long:n,type:1}});case 3:if(r=e.sent,console.log("progress进度",r.data),0!==r.data.code){e.next=11;break}return e.next=8,axios.get(this.$store.state.apiUrl+"/api/v1/app/course/course_detail",{headers:{token:this.$store.state.userInfo.token},params:{course_id:this.course.id}});case 8:c=e.sent,console.log("刷新进度",c.data.data.rate),this.course.rate=c.data.data.rate;case 11:case"end":return e.stop()}},e,this)}));return function(t,s,a,i){return e.apply(this,arguments)}}(),save:function(){var e=(0,i.default)(a.default.mark(function e(){var t,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$store.state.userInfo){e.next=15;break}if(0!==this.course.is_follow){e.next=9;break}return e.next=4,axios({method:"post",url:this.apiUrl+"/api/v1/app/course/person_course_follow",data:{course_id:this.course.id},headers:{token:this.$store.state.userInfo.token}});case 4:t=e.sent,console.log(t.data),"操作成功"!==t.data.message&&"已关注"!==t.data.message||(this.course.is_follow=1,this.$message({message:"关注成功~",type:"success"})),e.next=13;break;case 9:return e.next=11,axios({method:"post",url:this.apiUrl+"/api/v1/app/course/person_course_unfollow",data:{course_id:this.course.id},headers:{token:this.$store.state.userInfo.token}});case 11:"操作成功"===(s=e.sent).data.message&&(console.log(s.data),this.course.is_follow=0,this.$message({message:"取消关注~",type:"success"}));case 13:e.next=16;break;case 15:this.$router.push("/login");case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),change_tab:function(e){this.lesson_tab=e},pic_change:function(e){e?(this.share.src="/images/class/share2.png",this.share.type=!0):(this.share.src="/images/class/share1.png",this.share.type=!1)},like_change:function(){this.like.type=!this.like.type,this.like.type?(this.like.src="/images/class/like2.png",this.$message({message:"关注成功！",type:"success"})):(this.like.src="/images/class/like1.png",this.$message({message:"取消关注成功！",type:"success"}))},qq_change:function(e){this.qq=e?"/images/class/icon-qq2.png":"/images/class/icon-qq1.png"},wx_change:function(e){this.wx=e?"/images/class/icon-wx2.png":"/images/class/icon-wx1.png"},wb_change:function(e){this.wb=e?"/images/class/icon-wb2.png":"/images/class/icon-wb1.png"},ewm_change:function(e){this.ewm_show=e}},mounted:function(){this.play_init(0,0,this.course.chapters[0].course_section[0].video_id)}}},XksA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("MGbg"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);var r=s("uWlb"),c=s("VU/8")(i.a,r.a,!1,null,null,null);c.options.__file="pages\\class\\_id.vue",t.default=c.exports},Y0tu:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"introduce",props:["info","teacher_info","other_lesson","tea_case"],data:function(){return{stu_left:[],stu_right:[],outline_left:[],outline_right:[]}},methods:{},mounted:function(){}}},Zk0r:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"class-tab"},[s("span",{staticClass:"tab-con m-l-45 ",class:{active:1==e.lesson_tab},on:{click:function(t){e.tab_change(1)}}},[e._v("课程概述")]),s("span",{staticClass:"tab-con",class:{active:2==e.lesson_tab},on:{click:function(t){e.tab_change(2)}}},[e._v("课程目录")])])};a._withStripped=!0;var i={render:a,staticRenderFns:[]};t.a=i},uWlb:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"class-detail"},[s("localRoute",{attrs:{route:e.route_data}}),s("div",{staticClass:"buy-info"},[e._m(0),s("div",{staticClass:"buy-right"},[s("h3",{staticClass:"buy-tit"},[e._v(e._s(e.course.course_name))]),s("p",{staticClass:"buy-teacher"},[e._v(e._s(e.course.organization_teacher.realname)+" | "+e._s(e.course.organization_teacher.title))]),s("p",{staticClass:"buy-class-info"},[s("img",{attrs:{src:"/images/class/icon-num.png",alt:"",width:"16",height:"16"}}),s("span",[e._v(e._s(e.course.section_num)+" 课时")]),s("img",{attrs:{src:"/images/class/icon-time.png",alt:"",width:"16",height:"16"}}),s("span",[e._v(e._s(e._f("fixed2")(e._f("s-h")(e.course.media_time)))+" 小时")])]),s("p",{staticClass:"buy-price"},[s("span",{staticClass:"buy-price-now"},[e._v("价格："+e._s(e.course.price)+" 学币")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.course.Isbuy,expression:"!course.Isbuy"}],staticClass:"buy-btn now-buy",on:{click:function(t){e.ewm_change(!0)}}},[e._v("立即购买")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.ewm_show,expression:"ewm_show"}],staticClass:"ewm-cover"},[s("div",{staticClass:"cover-con"},[s("span",{staticClass:"close",on:{click:function(t){e.ewm_change(!1)}}},[s("img",{attrs:{src:"/images/class/close.png",alt:""}})]),s("img",{attrs:{src:"/images/class/ewm.png",alt:"",width:"150"}}),s("p",[e._v("下载APP购买课程")])])]),s("div",{staticClass:"buy-share"})])]),s("IntroduceTab",{attrs:{lesson_tab:e.lesson_tab,change_tab:e.change_tab}}),s("Introduce",{directives:[{name:"show",rawName:"v-show",value:1===e.lesson_tab,expression:"lesson_tab === 1"}],attrs:{info:e.course,teacher_info:e.teacher_info,other_lesson:e.other_lesson,tea_case:e.tea_case}}),s("Catalogue",{directives:[{name:"show",rawName:"v-show",value:2==e.lesson_tab,expression:"lesson_tab == 2"}],attrs:{lesson_mulu:e.course.chapters,is_get:e.course.is_get,c_index:e.c_index,s_index:e.s_index},on:{select:e.select}})],1)};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"buy-left"},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}})])}]};t.a=i},waWr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"localRoute",props:["route"],data:function(){return{change_params:0}},methods:{},mounted:function(){}}},wuc7:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.lesson_mulu,function(t,a){return s("ul",{key:a,staticClass:"mulu-list",staticStyle:{"margin-bottom":"20px"}},[s("li",{staticClass:"muli-tit"},[s("span",{staticClass:"li-span1"},[e._v("第"+e._s(a+1)+"章 "+e._s(t.chapter_name))])]),e._l(t.course_section,function(t,i){return s("li",{key:i,class:{"li-active-playing":e.c_index===a&&e.s_index===i},on:{click:function(s){e.$emit("select",t.app_free,a,i,t.video_id)}}},[s("span",{staticClass:"li-span2"},[e._v("第"+e._s(i+1)+"节 "+e._s(t.section_name))]),0===e.is_get&&t.app_free?s("span",{staticClass:"li-span3"},[s("img",{attrs:{src:"/images/class/icon-free.png",alt:"",width:"18",height:"9"}}),e._v("试看")]):e._e(),0!==e.is_get||t.app_free?e._e():s("span",{staticClass:"li-span3"},[s("img",{attrs:{src:"/images/class/icon-free.png",alt:"",width:"18",height:"9"}}),e._v("锁")]),1===e.is_get?s("span",{staticClass:"li-span3"}):e._e(),s("span",{staticClass:"li-span4"},[s("img",{attrs:{src:"/images/class/icon-video.png",alt:"",width:"15",height:"15"}}),e._v(e._s(e._f("s-h-format")(t.media_time)))])])})],2)}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.ewm_show,expression:"ewm_show"}],staticClass:"ewm-cover"},[s("div",{staticClass:"cover-con"},[s("span",{staticClass:"close",on:{click:function(t){e.ewm_show=!1}}},[s("img",{attrs:{src:"/images/class/close.png",alt:""}})]),s("img",{attrs:{src:"/images/class/ewm.png",alt:"",width:"150"}}),s("p",[e._v("下载APP后观看")])])])],2)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};t.a=i},zpg7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("waWr"),i=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);var r=s("/+O7"),c=s("VU/8")(i.a,r.a,!1,null,null,null);c.options.__file="components\\localRoute.vue",t.default=c.exports}});