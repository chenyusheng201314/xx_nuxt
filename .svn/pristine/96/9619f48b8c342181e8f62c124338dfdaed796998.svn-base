webpackJsonp([137],{"91gk":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(a("mvHQ")),n=r(a("Xxa5")),i=r(a("exGp"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={layout:"companyManage",name:"admin_body",data:function(){return{isRresetPW:!1,isOne:!0,isCourse:!0,addInfo:{},status:[{id:1,title:"正常"},{id:0,title:"冻结"}],searchFilter:{sex:""},dialogTableVisible:!1,dialogFormVisible:!1,dialogSetPWDVisible:!1,dialogDelVisible:!1,formLabelWidth:"200px",saveAction:"",choose:null,sex:[{id:1,title:"男"},{id:2,title:"女"}],rules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[345789]\d{9}$/,message:"手机号格式错误",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^[0-9A-Za-z]{6,16}$/,message:"请正确输入6~16位的初始密码",trigger:"blur"}],realname:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],department:[{required:!0,message:" 请输入所属部门",trigger:"blur"}]},cutPicDic:"",cutPicInfo:{},courseInfo:{},company_id:0,personInfo:{},user_data:"",submitDataAll:[],dialogMemberVisible:!1,memberFilter:{},memberPage:{pageSize:20,currentPage:1},memberInfo:{person:{photo:{}},rank_list:{today:{},week:{},all:{}}},workInfo:{},pageInfoWork:{total:0,pageSizes:[10,20,30,400],pageSize:20,currentPage:1},expDetailInfo:[],pageInfoExp:{total:0,pageSizes:[10,20,30,400],pageSize:20,currentPage:1},dialogExpVisible:!1,isCourseShow:!1,isTrainingShow:!1,dialogPicVisible:!1,picView:""}},asyncData:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,s,i,r,o=t.store;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:"/company/company_person/list",data:{page:1,psize:20}},e.next=3,o.dispatch("companyHttpGet",a);case 3:return 1==(s=e.sent).code&&(s.data={},s.data.data=[]),i={url:"/company/acl/role_list",data:{page:1,psize:100}},e.next=8,o.dispatch("companyHttpGet",i);case 8:return 1==(r=e.sent)&&(r.data={},r.data.data=[]),e.abrupt("return",{updateInfo:s.data.data,roleInfo:r.data.data,pageInfo:{total:s.data.total,pageSizes:[10,20,30,400],pageSize:20,currentPage:parseInt(s.data.page)}});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),methods:{setPic:function(e){this.picView=e,this.dialogPicVisible=!0},handleSizeChangeWork:function(e){this.pageInfoWork.pageSize=e,this.setWorkData()},handleCurrentChangeWork:function(e){this.pageInfoWork.currentPage=e,this.setWorkData()},expDetail:function(){this.expDetailInfo={},this.dialogExpVisible=!0,this.getExpDetail()},getExpDetail:function(){var e=(0,i.default)(n.default.mark(function e(){var t,a,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t={}).person_id=this.memberInfo.person.id,t.training_class_id=this.memberInfo.training_class_id,t.page=this.pageInfoExp.currentPage,t.psize=this.pageInfoExp.pageSize,a={url:"/company/training_class_experience/list",data:t},e.next=8,this.$store.dispatch("companyHttpGet",a);case 8:s=e.sent,console.log(s.data.data),this.expDetailInfo=s.data.data,this.pageInfoExp.currentPage=parseInt(s.data.page),this.pageInfoExp.total=s.data.total;case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleSizeExp:function(e){this.$set(this.pageInfoExp,"pageSize",e),this.getExpDetail()},handleCurrentExp:function(e){this.$set(this.pageInfoExp,"currentPage",e),this.getExpDetail()},setWorkData:function(){var e=(0,i.default)(n.default.mark(function e(t,a){var s,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.pageInfo.currentPage,this.pageInfo.pageSize),s={url:"/company/training_class_task/person_list",data:{person_id:t,training_class_id:a,page:this.pageInfo.currentPage,psize:this.pageInfo.pageSize}},e.next=4,this.$store.dispatch("companyHttpGet",s);case 4:i=e.sent,console.log(i),this.workInfo=i.data.data,this.pageInfo.currentPage=parseInt(i.data.page),this.pageInfo.total=i.data.total;case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),seeM:function(){var e=(0,i.default)(n.default.mark(function e(t,a,s){var i,r,o,l;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,s),i={url:"/company/training_class_member/info",data:{person_id:t,training_id:a,training_class_id:s}},e.next=4,this.$store.dispatch("companyHttpGet",i);case 4:if(0==(r=e.sent).code){e.next=8;break}return this.$message.error(r.message),e.abrupt("return",!1);case 8:for(l in this.memberInfo=r.data,o=0,this.$set(this.memberInfo,"trainingCount",r.data.trainging_rete.length),r.data.trainging_rete)r.data.trainging_rete[l].jindu>=parseFloat(r.data.trainging_rete[l].stage_pct)&&o++;this.$set(this.memberInfo,"jinduMun",o),this.setWorkData(t,s),this.dialogMemberVisible=!0;case 15:case"end":return e.stop()}},e,this)}));return function(t,a,s){return e.apply(this,arguments)}}(),downloadTemp:function(){window.open("/company_manage/files/temp.xlsx")},setIsOne:function(e){this.isOne=e},delT:function(){if(!this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","del"))return this.$message({message:"警告，您无此权限",type:"warning"}),!1;this.dialogFormVisible=!1,this.dialogDelVisible=!0},del:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:"/company/company_person/del",data:{id:t}},e.next=3,this.$store.dispatch("companyHttpPost",a);case 3:s=e.sent,console.log(s),0==s.code?(this.dialogDelVisible=!1,this.$message({message:"移除成功",type:"success"}),this.setData()):(this.dialogDelVisible=!1,this.$message.error("移除失败"));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),see:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,i,r,o,l,c,d;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","info")){e.next=4;break}return this.$message({message:"警告，您无此权限",type:"warning"}),e.abrupt("return",!1);case 4:return this.isCourse=this.isCourseShow=this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","person_course_list"),this.isTrainingShow=this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","person_training_list"),this.isRresetPW=!1,this.saveAction="edit",a={url:"/company/company_person/info",data:{id:t}},e.next=11,this.$store.dispatch("companyHttpGet",a);case 11:return i=e.sent,this.personInfo=JSON.parse((0,s.default)(i.data)),console.log(this.personInfo),r={url:"/company/company_person/person_course_list",data:{person_id:i.data.person_id,page:1,psize:20}},e.next=17,this.$store.dispatch("companyHttpGet",r);case 17:return 1==(o=e.sent).code&&(o.data={},o.data.data=[]),console.log(o),this.$set(this.personInfo,"course",JSON.parse((0,s.default)(o.data.data))),l={total:o.data.total,pageSizes:[10,20,30,400],pageSize:20,currentPage:parseInt(o.data.page)},this.$set(this.personInfo,"coursePageInfo",l),c={url:"/company/company_person/person_training_list",data:{person_id:i.data.person_id,page:1,psize:20}},e.next=26,this.$store.dispatch("companyHttpGet",c);case 26:1==(d=e.sent).code&&(d.data=[]),this.$set(this.personInfo,"training",d.data),this.dialogTableVisible=!0;case 30:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setIsCourse:function(e){this.isCourse=e,console.log(this.isCourse)},courseSizeChange:function(e){this.personInfo.coursePageInfo.pageSize=e,this.personInfo.coursePageInfo.currentPage=1,this.setCourseData()},courseCurrentChange:function(e){this.personInfo.coursePageInfo.currentPage=e,this.setCourseData()},setCourseData:function(){var e=(0,i.default)(n.default.mark(function e(){var t,a,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t={}).page=0==r?this.personInfo.coursePageInfo.currentPage:r,t.psize=this.personInfo.coursePageInfo.pageSize,t.person_id=this.personInfo.person_id,a={url:"/company/company_person/person_course_list",data:t},e.next=7,this.$store.dispatch("companyHttpGet",a);case 7:i=e.sent,this.personInfo.coursePageInfo.currentPage=parseInt(i.data.page),this.personInfo.coursePageInfo.total=i.data.total,this.$set(this.personInfo,"course",JSON.parse((0,s.default)(i.data.data)));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),add:function(){if(!this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","add"))return this.$message({message:"警告，您无此权限",type:"warning"}),!1;this.submitDataAll=[],this.user_data="",this.isOne=!0,this.dialogFormVisible=!0,this.isRresetPW=!0,this.addInfo={},this.saveAction="add"},cancel:function(){this.dialogFormVisible=!1,this.$refs.addInfo.resetFields()},edit:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.comsys.adminCheckRole(this.$store.state.company.companyRole.data,"company_person","edit")){e.next=4;break}return this.$message({message:"警告，您无此权限",type:"warning"}),e.abrupt("return",!1);case 4:return this.isOne=!0,this.saveAction="edit",a={url:"/company/company_person/info",data:{id:t}},e.next=9,this.$store.dispatch("companyHttpGet",a);case 9:s=e.sent,this.addInfo={},this.addInfo.id=s.data.id,this.addInfo.mobile=s.data.person.mobile,this.addInfo.realname=s.data.realname,this.addInfo.department=s.data.department,this.dialogFormVisible=!0;case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),resetPw:function(){this.isRresetPW=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=(0,i.default)(n.default.mark(function e(a){var i,r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}if("edit"!=t.saveAction){e.next=5;break}t.addSubmit("addInfo"),e.next=12;break;case 5:return i=JSON.parse((0,s.default)(t.addInfo)),r={url:"/company/company_person/check_add",data:{mobile:i.mobile}},e.next=9,t.$store.dispatch("companyHttpPost",r);case 9:o=e.sent,console.log(o),0!=o.code?t.dialogSetPWDVisible=!0:t.$message.error("该用户已添加");case 12:e.next=16;break;case 14:return console.log("error submit!!"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},addSubmit:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,r=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse((0,s.default)(this.addInfo)),console.log(a),this.$refs[t].validate(function(){var e=(0,i.default)(n.default.mark(function e(t){var a,i,o,l;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return a="edit"==r.saveAction?"/company/company_person/edit":"/company/company_person/add",console.log(a),i=JSON.parse((0,s.default)(r.addInfo)),o={url:a,data:i},e.next=7,r.$store.dispatch("companyHttpPost",o);case 7:l=e.sent,console.log(l),0==l.code?(r.dialogSetPWDVisible=!1,r.dialogFormVisible=!1,r.$message({message:"保存成功",type:"success"}),r.setData()):(r.dialogSetPWDVisible=!1,r.dialogFormVisible=!1,r.$message.error("保存失败"+l.message),console.log(l.message)),e.next=14;break;case 12:return console.log("error submit!!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()),console.log(a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=(0,i.default)(n.default.mark(function e(){var t,a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse((0,s.default)(this.addInfo)),a={url:"/company/company_person/add",data:t},e.next=4,this.$store.dispatch("companyHttpPost",a);case 4:0==e.sent.code?(this.$message({message:"保存成功",type:"success"}),this.setData(),this.dialogFormVisible=!1):this.$message.error("保存失败");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleSizeChange:function(e){this.pageInfo.pageSize=e,this.currentPage=1,this.setData()},handleCurrentChange:function(e){this.pageInfo.currentPage=e,this.setData()},sortByKey:function(e,t){return e.sort(function(e,a){var s=e[t],n=a[t];return s<n?-1:s>n?1:0})},handleAvatarSuccess:function(e,t,a){if(0==e.code)for(var s in this.submitDataAll=e.data,e.data)this.user_data=this.user_data+e.data[s].realname+" "+e.data[s].mobile+" "+e.data[s].department+"\n";else this.$message.error("上传失败，"+e.message)},beforeAvatarUpload:function(e){console.log(e);var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type;return t||this.$message.error("上传只能是xlsx或xls格式!"),t},submitFormAll:function(){this.submitDataAll.length>0?this.dialogSetPWDVisible=!0:this.$message.error("请上传xlsx文件")},addSubmitAll:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,r=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a in this.submitDataAll)this.submitDataAll[a].password=this.addInfo.password;console.log((0,s.default)(this.submitDataAll)),this.$refs[t].validate(function(){var e=(0,i.default)(n.default.mark(function e(t){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={url:"/company/company_person/add_batch",data:{user_data:(0,s.default)(r.submitDataAll)}},e.next=4,r.$store.dispatch("companyHttpPost",a);case 4:0==e.sent.code?(r.$message({message:"保存成功",type:"success"}),r.setData(),r.dialogSetPWDVisible=!1,r.dialogFormVisible=!1):r.$message.error("保存失败"),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setData:function(){var e=(0,i.default)(n.default.mark(function e(){var t,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchFilter.page=0==s?this.pageInfo.currentPage:s,this.searchFilter.psize=this.pageInfo.pageSize,t={url:"/company/company_person/list",data:this.searchFilter},e.next=5,this.$store.dispatch("companyHttpGet",t);case 5:a=e.sent,this.pageInfo.currentPage=parseInt(a.data.page),this.pageInfo.total=a.data.total,this.updateInfo=a.data.data;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getCourseInfo:function(){var e=(0,i.default)(n.default.mark(function e(t){var a,s,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:"/manage/company/company_course_list",data:{company_id:t,page:1,psize:20}},e.next=3,this.$store.dispatch("adminHttpGet",a);case 3:s=e.sent,i={total:s.data.total,pageSizes:[10,20,30,400],pageSize:20,currentPage:parseInt(s.data.page)},this.$set(this.courseInfo,"pageInfo",i),this.$set(this.courseInfo,"ownCourse",s.data.data),console.log(s);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},computed:{},mounted:function(){},head:function(){return{title:"公司学员",meta:[{hid:"description",name:"description",content:"123"}],link:[{href:"/admin/css/cropper.min.css",type:"text/css",rel:"stylesheet"}],script:[{src:"/admin/js/cropper.min.js"}]}}}},EPVC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("91gk"),n=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);var r=a("WG1z"),o=a("VU/8")(n.a,r.a,!1,null,null,null);o.options.__file="pages\\company_manage\\member\\index.vue",t.default=o.exports},WG1z:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin_body_right"},[a("div",{staticClass:"base_body"},[e._m(0),a("div",{staticClass:"searchFilter"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchFilter}},[a("el-form-item",{attrs:{label:"用户昵称","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.searchFilter.username,callback:function(t){e.$set(e.searchFilter,"username",t)},expression:"searchFilter.username"}})],1),a("el-form-item",{attrs:{label:"账号","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.searchFilter.mobile,callback:function(t){e.$set(e.searchFilter,"mobile",t)},expression:"searchFilter.mobile"}})],1),a("el-form-item",{attrs:{label:"真实姓名","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.searchFilter.realname,callback:function(t){e.$set(e.searchFilter,"realname",t)},expression:"searchFilter.realname"}})],1),a("el-form-item",{attrs:{label:"性别","label-width":"80px"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchFilter.sex,callback:function(t){e.$set(e.searchFilter,"sex",t)},expression:"searchFilter.sex"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.sex,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)],1),a("el-form-item",{attrs:{label:"生日","label-width":"80px",clearable:""}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd 00:00:00",type:"date",placeholder:"选择日期"},model:{value:e.searchFilter.birthday_start_time,callback:function(t){e.$set(e.searchFilter,"birthday_start_time",t)},expression:"searchFilter.birthday_start_time"}}),e._v(" -\r\n          "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd 23:59:59",type:"date",placeholder:"选择日期"},model:{value:e.searchFilter.birthday_end_time,callback:function(t){e.$set(e.searchFilter,"birthday_end_time",t)},expression:"searchFilter.birthday_end_time"}})],1),a("el-form-item",{staticClass:"fRight"},[a("el-button",{staticClass:"btn_search",on:{click:function(t){e.setData(1)}}},[e._v("搜索")]),a("el-button",{staticClass:"btn_create",on:{click:function(t){e.add()}}},[e._v(" + 添加学员 ")])],1)],1)],1),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("tbody",[e._m(1),e._l(e.updateInfo,function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1))]),a("td",{attrs:{align:"left"}},[t.person?a("div",[t.person.photo.value?a("div",{staticClass:"head_img"},[a("img",{attrs:{src:t.person.photo.value}})]):e._e(),e._v(e._s(t.person.username))]):e._e()]),a("td",[e._v(e._s(t.realname))]),a("td",[e._v(e._s(t.department))]),a("td",[e._v(e._s(t.person.mobile))]),a("td",[""!=t.person.sex?a("span",[e._v(e._s(0==t.person.sex?"--":e.$store.state.company.sex[t.person.sex]))]):a("span",[e._v("--")])]),a("td",[""!=t.person.birthday?a("span",[e._v(e._s(t.person.birthday))]):a("span",[e._v("--")])]),a("td",[e._v(e._s(t.created_at))]),a("td",[a("i",{staticClass:"iconfont icon_btn icon_btn_see",on:{click:function(a){e.see(t.id)}}},[e._v("")]),a("i",{staticClass:"iconfont icon_btn icon_btn_edit",on:{click:function(a){e.edit(t.id)}}},[e._v("")])])])})],2)])]),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.currentPage,"page-sizes":e.pageInfo.pageSizes,"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e.dialogFormVisible?a("el-dialog",{attrs:{title:("edit"==e.saveAction?"编辑":"添加")+"学员",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},["edit"!=e.saveAction?a("div",{staticClass:"base_tab"},[a("div",{class:e.isOne?"tab hover":"tab",on:{click:function(t){e.setIsOne(!0)}}},[e._v("单个添加")]),a("div",{class:e.isOne?"tab":"tab hover",on:{click:function(t){e.setIsOne(!1)}}},[e._v("批量导入")])]):e._e(),e.isOne?a("div",[a("el-form",{ref:"addInfo",attrs:{model:e.addInfo,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"realname"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addInfo.realname,callback:function(t){e.$set(e.addInfo,"realname",t)},expression:"addInfo.realname"}})],1),a("el-form-item",{attrs:{label:"账号（手机号）","label-width":e.formLabelWidth,prop:"mobile"}},[a("el-input",{attrs:{type:"number","auto-complete":"off",disabled:"edit"==e.saveAction},model:{value:e.addInfo.mobile,callback:function(t){e.$set(e.addInfo,"mobile",t)},expression:"addInfo.mobile"}})],1),a("el-form-item",{attrs:{label:"所属部门","label-width":e.formLabelWidth,prop:"department"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addInfo.department,callback:function(t){e.$set(e.addInfo,"department",t)},expression:"addInfo.department"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},["edit"==e.saveAction?a("el-button",{staticClass:"el-button--del",on:{click:function(t){e.delT()}}},[e._v("删除账号")]):e._e(),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("addInfo")}}},[e._v("保存")])],1)],1):a("div",[a("el-input",{staticStyle:{width:"60%",display:"inline-block","vertical-align":"top"},attrs:{type:"textarea",rows:20,disabled:"",placeholder:"请批量导入"},model:{value:e.user_data,callback:function(t){e.user_data=t},expression:"user_data"}}),a("div",{staticClass:"all_person"},[a("span",[e._v("模板")]),a("p",{on:{click:function(t){e.downloadTemp()}}},[e._v("下载模板")]),a("span",[e._v("上传名单")]),a("p",[a("el-upload",{attrs:{action:e.$store.state.company.baseUrl+"/company/company_person/excel_parsing",headers:{token:e.$store.state.company.token},"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small"}},[e._v("点击上传")])],1)],1),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("有效名单数量统计")]),a("span",{staticStyle:{"margin-top":"0"}},[e._v(e._s(e.submitDataAll.length))])]),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitFormAll()}}},[e._v("保存")])],1)],1)]):e._e(),a("el-dialog",{attrs:{title:"设置初始密码","append-to-body":"",visible:e.dialogSetPWDVisible,width:"30%"},on:{"update:visible":function(t){e.dialogSetPWDVisible=t}}},[a("p",{staticStyle:{"text-align":"center"}},[e._v("该用户尚未注册，请为他设置一个6~16位的初始密码 ")]),a("el-form",{ref:"addInfo2",attrs:{model:e.addInfo,rules:e.rules}},[a("el-form-item",{attrs:{label:"初始密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addInfo.password,callback:function(t){e.$set(e.addInfo,"password",t)},expression:"addInfo.password"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e.isOne?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSubmit("addInfo2")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSubmitAll("addInfo2")}}},[e._v("确 定")])],1)],1),e.dialogTableVisible?a("el-dialog",{attrs:{title:"学员主页",visible:e.dialogTableVisible,width:"60%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"memeber_info_user"},[a("div",{staticClass:"memeber_user_header"},[e.personInfo.person.photo?a("img",{attrs:{src:e.personInfo.person.photo.value}}):e._e()]),a("div",{staticClass:"memeber_user_info"},[a("div",{staticClass:"title"},[e._v("用户账号："+e._s(e.personInfo.person.mobile)+"  "),a("span",{staticStyle:{"font-size":"16px",display:"none"}},[e._v(" "+e._s(1==e.status?"正常":"冻结"))])]),a("ul",[a("li",[e._v("昵称："+e._s(e.personInfo.person.username?e.personInfo.person.username:"--")+" ")]),a("li",[e._v("部门："+e._s(e.personInfo.department?e.personInfo.department:"--"))]),a("li",[e._v("姓名："+e._s(e.personInfo.realname?e.personInfo.realname:"--"))]),a("li",[e._v("现任职位："+e._s(e.personInfo.person.company_position?e.personInfo.person.company_position:"--"))]),a("li",[e._v("身份证号："+e._s(e.personInfo.person.identification_number?e.personInfo.person.identification_number:"--"))]),a("li",[e._v("邮箱："+e._s(e.personInfo.person.email?e.personInfo.person.email:"--"))]),a("li",[e._v("生日："+e._s(e.personInfo.person.birthday?e.personInfo.person.birthday:"--"))]),a("li",[e._v("从事培训年限："+e._s(e.personInfo.person.years_of_training?e.personInfo.person.years_of_training:"--")+"年")]),a("li",[e._v("性别："+e._s(e.personInfo.person.sex?e.$store.state.admin.sex[e.personInfo.person.sex]:"--"))]),a("div",{staticClass:"clr"})])]),a("div",{staticClass:"clr"})]),a("div",{staticClass:"clr"}),a("div",{staticClass:"base_tab"},[e.isCourseShow?a("div",{class:e.isCourse?"tab hover":"tab",on:{click:function(t){e.setIsCourse(!0)}}},[e._v("课程")]):e._e(),e.isTrainingShow?a("div",{class:e.isCourse?"tab":"tab hover",on:{click:function(t){e.setIsCourse(!1)}}},[e._v("训练营")]):e._e()]),e.isCourse?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"6%"}},[e._v("序号")]),a("th",{attrs:{width:"8%"}},[e._v("课程封面")]),a("th",{attrs:{width:"8%"}},[e._v("课程名称")]),a("th",{attrs:{width:"8%"}},[e._v("主讲导师")]),a("th",{attrs:{width:"8%"}},[e._v("获取时间")]),a("th",{attrs:{width:"8%"}},[e._v("学习时长")])]),e._l(e.personInfo.course,function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1))]),a("td",[a("img",{staticStyle:{width:"100px"},attrs:{src:5==t.get_type?t.companycourse.cover.value:t.course.cover.value}})]),a("td",[e._v(e._s(5==t.get_type?t.companycourse.course_name:t.course.course_name))]),a("td",[e._v(e._s(5==t.get_type?t.companycourse.teacher.realname:t.course.teacher.realname))]),a("td",[e._v(e._s(5==t.get_type?t.companycourse.created_at:t.course.created_at))]),a("td",[e._v(e._s(5==t.get_type?t.companycourse.all_time:t.course.all_time))])])})],2)])]):e._e(),e.isCourse&e.isCourseShow?a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.personInfo.coursePageInfo.currentPage,"page-sizes":e.personInfo.coursePageInfo.pageSizes,"page-size":e.personInfo.coursePageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.personInfo.coursePageInfo.total},on:{"size-change":e.courseSizeChange,"current-change":e.courseCurrentChange}})],1):e._e(),!e.isCourse&e.isTrainingShow?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"6%"}},[e._v("序号")]),a("th",{attrs:{width:"8%"}},[e._v("班级封面图")]),a("th",{attrs:{width:"8%"}},[e._v("所在班级")]),a("th",{attrs:{width:"8%"}},[e._v("所属训练营")]),a("th",{attrs:{width:"8%"}},[e._v("入班时间")]),a("th",{attrs:{width:"8%"}},[e._v("操作")])]),e._l(e.personInfo.training,function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1))]),a("td",[a("img",{staticStyle:{width:"100px"},attrs:{src:t.class.class_cover.value}})]),a("td",[e._v(e._s(t.class.class_name))]),a("td",[e._v(e._s(t.training.training_name))]),a("td",[e._v(e._s(t.created_at))]),a("td",{on:{click:function(a){e.seeM(t.person_id,t.training_id,t.class_id)}}},[e._v("查看")])])})],2)])]):e._e()]):e._e(),e.dialogMemberVisible?a("el-dialog",{attrs:{title:"班级学员信息",visible:e.dialogMemberVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(t){e.dialogMemberVisible=t}}},[a("div",{staticClass:"memeber_info_user"},[a("div",{staticClass:"memeber_user_header"},[a("img",{attrs:{src:e.memberInfo.person.photo.value}})]),a("div",{staticClass:"memeber_user_info"},[a("div",{staticClass:"title"},[e._v("用户账号："+e._s(e.memberInfo.person.mobile)+"  "),a("span",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.memberInfo.join_time)+"入班")])]),a("ul",[a("li",[e._v("昵称："+e._s(e.personInfo.person.username?e.personInfo.person.username:"--")+" ")]),a("li",[e._v("部门："+e._s(e.personInfo.department?e.personInfo.department:"--"))]),a("li",[e._v("姓名："+e._s(e.personInfo.realname?e.personInfo.realname:"--"))]),a("li",[e._v("现任职位："+e._s(e.personInfo.person.company_position?e.personInfo.person.company_position:"--"))]),a("li",[e._v("身份证号："+e._s(e.personInfo.person.identification_number?e.personInfo.person.identification_number:"--"))]),a("li",[e._v("邮箱："+e._s(e.personInfo.person.email?e.personInfo.person.email:"--"))]),a("li",[e._v("生日："+e._s(e.personInfo.person.birthday?e.personInfo.person.birthday:"--"))]),a("li",[e._v("从事培训年限："+e._s(e.personInfo.person.years_of_training?e.personInfo.person.years_of_training:"--")+"年")]),a("li",[e._v("性别："+e._s(e.personInfo.person.sex?e.$store.state.admin.sex[e.personInfo.person.sex]:"--"))])])])]),a("div",{staticClass:"clr"}),a("div",{staticClass:"el-dialog__header"},[a("span",{staticClass:"el-dialog__title"},[e._v("Ta的学习情况")])]),a("div",{staticClass:"learn_status"},[a("div",{staticClass:"learn_status_info"},[e._v("\r\n            今日获得经验值"),a("span",[e._v(e._s(e.memberInfo.rank_list.today.experience_value))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            本周获得经验值"),a("span",[e._v(e._s(e.memberInfo.rank_list.week.experience_value))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            总经验值 "),a("b",{on:{click:function(t){e.expDetail()}}},[e._v("明细>>")]),a("span",[e._v(e._s(e.memberInfo.rank_list.all.experience_value))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            作业提交次数"),a("span",[e._v(e._s(e.memberInfo.task_count))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            闯关进度"),a("span",[e._v(e._s(e.memberInfo.jinduMun)+"/"+e._s(e.memberInfo.trainingCount))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            今日排名"),a("span",[e._v(e._s(e.memberInfo.rank_list.today.rank))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            本周排名"),a("span",[e._v(e._s(e.memberInfo.rank_list.week.rank))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            总排名"),a("span",[e._v(e._s(e.memberInfo.rank_list.all.rank))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            作业总得分"),a("span",[e._v(e._s(e.memberInfo.fraction_total))])]),a("div",{staticClass:"learn_status_info"},[e._v("\r\n            \r\n            被点赞总数"),a("span",[e._v(e._s(e.memberInfo.digg_up_total))])])]),a("div",{staticClass:"clr"}),a("div",{staticClass:"el-dialog__header"},[a("span",{staticClass:"el-dialog__title"},[e._v("Ta的作业")])]),e._l(e.workInfo,function(t,s){return a("div",{key:s,staticClass:"work_list"},[a("div",{staticClass:"work_list_binfo"},[1==t.fraction_status?a("div",{staticClass:"has_score",staticStyle:{float:"right"}},[a("b",[e._v(e._s(t.fraction))]),e._v(" 经验值  "),1==t.come_late?a("div",[e._v("未按时提交")]):e._e()]):2==t.fraction_status?a("div",{staticClass:"has_score",staticStyle:{float:"right"}},[a("b",[e._v(e._s(t.fraction))]),e._v(" 经验值  "),1==t.come_late?a("div",[e._v("未按时提交")]):e._e()]):a("div",{staticClass:"has_score",staticStyle:{float:"right"}},[a("b",[e._v("未批改")]),1==t.come_late?a("div",[e._v("未按时提交")]):e._e()]),a("span",{staticClass:"work_list_honer",staticStyle:{display:"block"}},[e._v(e._s(t.training_class_topic.title))]),a("span",{staticClass:"work_list_time"},[e._v(e._s(t.created_at))])]),a("div",{staticClass:"work_list_content"},[e._v(e._s(t.content))]),a("div",{staticClass:"work_list_imgs"},[a("ul",e._l(t.photos,function(t,s){return a("li",{key:s,style:"background-image: url("+t.value.value+");",on:{click:function(a){e.setPic(t.value.value)}}})}))]),a("div",{staticClass:"work_list_address"},[e._v("\r\n                赞："+e._s(t.digg_up)+"      评论："+e._s(t.comment_count)+"\r\n              ")])])}),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.pageInfoWork.currentPage,"page-sizes":e.pageInfoWork.pageSizes,"page-size":e.pageInfoWork.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfoWork.total},on:{"size-change":e.handleSizeChangeWork,"current-change":e.handleCurrentChangeWork}})],1),a("div",{staticClass:"clr"}),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMemberVisible=!1}}},[e._v("取 消")])],1)],2):e._e(),e.dialogExpVisible?a("el-dialog",{attrs:{title:"总经验值明细",visible:e.dialogExpVisible,"append-to-body":"",width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogExpVisible=t}}},[a("ul",{staticClass:"exp_detail"},e._l(e.expDetailInfo,function(t,s){return a("li",{key:s},[1==t.method?a("span",{staticClass:"green"},[e._v("+"+e._s(t.experience_value))]):a("span",{staticClass:"red"},[e._v("-"+e._s(t.experience_value))]),a("span",[e._v(e._s(t.remark))]),a("span",[e._v(e._s(t.updated_at))])])})),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.pageInfoExp.currentPage,"page-sizes":e.pageInfoExp.pageSizes,"page-size":e.pageInfoExp.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfoExp.total},on:{"size-change":e.handleSizeExp,"current-change":e.handleCurrentExp}})],1)]):e._e(),e.dialogDelVisible?a("el-dialog",{attrs:{title:"重要操作确认","append-to-body":"",visible:e.dialogDelVisible,width:"30%"},on:{"update:visible":function(t){e.dialogDelVisible=t}}},[a("p",{staticStyle:{"text-align":"center"}},[e._v("将学员移除后，学员在贵公司的学习数据都将被清空，"),a("br"),e._v("\r\n也将同步从公司的训练营班级中移除，确定移除该学员？ ")]),a("div",{attrs:{align:"center"}},[a("el-button",{staticClass:"el-button--del2",on:{click:function(t){e.del(e.addInfo.id)}}},[e._v("移 除")])],1),a("div",{attrs:{align:"center"}},[a("el-button",{staticClass:"el-button--cancel2",on:{click:function(t){e.dialogDelVisible=!1}}},[e._v("取 消")])],1)]):e._e(),e.dialogPicVisible?a("el-dialog",{attrs:{title:"图片预览",visible:e.dialogPicVisible,"append-to-body":"",width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogPicVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.picView}})])]):e._e()],1)};s._withStripped=!0;var n={render:s,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"base_title"},[t("div",{staticClass:"title"},[this._v("公司学员\r\n          "),t("p",[this._v("Company cadets")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{attrs:{width:"8%"}},[e._v("序号")]),a("th",{attrs:{width:"12%"}},[e._v("学员")]),a("th",{attrs:{width:"6%"}},[e._v("真实姓名")]),a("th",{attrs:{width:"6%"}},[e._v("部门")]),a("th",{attrs:{width:"8%"}},[e._v("账号")]),a("th",{attrs:{width:"6%"}},[e._v("性别")]),a("th",{attrs:{width:"8%"}},[e._v("生日")]),a("th",{attrs:{width:"12%"}},[e._v("加入时间")]),a("th",{attrs:{width:"12%"}},[e._v("操作")])])}]};t.a=n}});