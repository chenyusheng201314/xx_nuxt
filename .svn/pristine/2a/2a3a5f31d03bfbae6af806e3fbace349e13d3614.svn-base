webpackJsonp([111],{"0HPq":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i(e("mvHQ"));i(e("mtWM"));function i(t){return t&&t.__esModule?t:{default:t}}a.default={name:"crop",layout:"admin",props:["submit_avatar","my_style","son_style"],data:function(){return{}},methods:{get_img_url:function(t){this.$emit("return_img",t)},cropper_init:function(){var t=this,a=window.console||{log:function(){}},e=$("#image"),i=$("#dataX"),o=$("#dataY"),n=$("#dataHeight"),r=$("#dataWidth"),l={aspectRatio:1500/852,preview:".img-preview",crop:function(t){i.val(Math.round(t.x)),o.val(Math.round(t.y)),n.val(Math.round(t.height)),r.val(Math.round(t.width))}};$('[data-toggle="tooltip"]').tooltip(),$("#image").on({"crop.cropper":function(t){}}).cropper(l),$.isFunction(document.createElement("canvas").getContext)||$('button[data-method="getCroppedCanvas"]').prop("disabled",!0),$(".docs-toggles").on("change","input",function(){var t=$(this);t.attr("name"),t.prop("type");e.data("cropper")}),$(".docs-buttons").on("click","[data-method]",function(){var i,o,n=$(this),r=n.data();if(!n.prop("disabled")&&!n.hasClass("disabled")&&e.data("cropper")&&r.method){if(void 0!==(r=$.extend({},r)).target&&(i=$(r.target),void 0===r.option))try{r.option=JSON.parse(i.val())}catch(t){a.log(t.message)}switch(o=e.cropper(r.method,r.option,r.secondOption),r.method){case"getCroppedCanvas":o&&(t.submit_avatar.pic_head_url=o.toDataURL("image/jpeg"),$.ajax({type:"POST",url:"https://platform.vpx.com.cn/api/v1/common/file/add",headers:{token:t.$store.state.admin.token},data:{file_base64:o.toDataURL("image/jpeg")},success:function(a){t.get_img_url(a.data.file_url)},async:!1}))}if($.isPlainObject(o)&&i)try{i.val((0,s.default)(o))}catch(t){a.log(t.message)}}});var c,d=$("#inputImage"),p=window.URL||window.webkitURL;p?d.change(function(){var t,a=this.files;e.data("cropper")&&a&&a.length&&(t=a[0],/^image\/\w+$/.test(t.type)?(c=p.createObjectURL(t),e.one("built.cropper",function(){p.revokeObjectURL(c)}).cropper("reset").cropper("replace",c),d.val("")):window.alert("请选择图片文件"))}):d.prop("disabled",!0).parent().addClass("disabled")},get_fun:function(){this.cropper_init()}},mounted:function(){},head:function(){return{script:[{src:"/admin/js/jquery-3.3.1.min.js"},{src:"/admin/js/bootstrap.min.js"},{src:"/admin/js/cropper.min.js"}],link:[{href:"/admin/css/common.css",type:"text/css",rel:"stylesheet"},{href:"/admin/css/cropper.min.css",type:"text/css",rel:"stylesheet"}]}}}},Trsi:function(t,a,e){"use strict";var s=function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"inline-block upload",style:this.my_style,on:{click:this.get_fun}},[a("a",{staticClass:" up",attrs:{href:"javascript:;","data-toggle":"modal","data-target":"#cropper"}},[a("input",{staticClass:"cus",style:this.son_style,attrs:{type:"file",name:"img",id:"file"}})])]),this._m(0)])};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal fade bs-example-modal-lg",attrs:{id:"cropper",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[this._v("图片裁剪")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"iconfont cus"},[this._v("")])])])]),a("div",{staticClass:"text-left modal-body-cropper"},[a("div",{staticClass:"img-container"},[a("img",{staticClass:"img-responsive",attrs:{id:"image",src:"/admin/images/medal/header.jpg",crossorigin:"anonymous",alt:"Picture"}})]),a("div",{staticClass:"docs-buttons"},[a("div",{staticClass:"btn-group center-block select-img"},[a("label",{staticClass:"btn btn-secondary btn-outline btn-upload",attrs:{for:"inputImage",title:"Upload image file"}},[a("input",{staticClass:"sr-only",attrs:{type:"file",id:"inputImage",name:"file",accept:"image/*"}}),a("span",{staticClass:"docs-tooltip",attrs:{"data-toggle":"tooltip"}},[this._v("上传图片")])])])])]),a("div",{staticClass:"modal-footer docs-buttons"},[a("button",{staticClass:"btn waves-effect waves-light btn-default",attrs:{type:"button","data-dismiss":"modal"}},[this._v("取消")]),a("button",{staticClass:"btn waves-effect waves-light btn-success",attrs:{type:"button","data-dismiss":"modal","data-method":"getCroppedCanvas"}},[a("span",{staticClass:"docs-tooltip",attrs:{"data-toggle":"tooltip",title:'$().cropper("getCroppedCanvas")'}},[this._v(" 提交 ")])])])])])])}]};a.a=i},UxCB:function(t,a){},a9tS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("0HPq"),i=e.n(s);for(var o in s)"default"!==o&&function(t){e.d(a,t,function(){return s[t]})}(o);var n=e("Trsi"),r=!1;var l=function(t){r||e("UxCB")},c=e("VU/8")(i.a,n.a,!1,l,"data-v-39780323",null);c.options.__file="pages\\admin\\crop.vue",a.default=c.exports}});