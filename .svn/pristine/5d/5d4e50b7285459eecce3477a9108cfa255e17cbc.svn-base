webpackJsonp([66],{"+jd8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Pyx8"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var s=a("Swz8"),c=!1;var r=function(t){c||a("obSw")},u=a("VU/8")(i.a,s.a,!1,r,null,null);u.options.__file="pages\\admin\\account.vue",e.default=u.exports},H8Uz:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left_nav"},[a("ul",t._l(t.data,function(e,n){return a("li",{key:n,class:{active:e.active},on:{click:function(e){t.nav_choose(n)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])}))])};n._withStripped=!0;var i={render:n,staticRenderFns:[]};e.a=i},Pyx8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(a("Xxa5")),i=c(a("exGp")),o=c(a("cJuq")),s=c(a("mtWM"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={layout:"admin",name:"account",components:{LeftNav:o.default},data:function(){return{leftNav:[],fullscreenLoading:!1,search_info:{name:"",account:"",account_type_select:["全部","正常","冻结"],account_type:"全部",time:[]},cover_show:!1,account_info:{role_id:"",id:"",account:"",account_disable:!1,pwd:"",pwd_show_type:"txt",pwd_disable:!1,name:"",department:"",type_select:["正常","冻结"],type:"",role:"",other_disable:!1},account_save_show:!0,account_tit:"创建账号"}},asyncData:function(){var t=(0,i.default)(n.default.mark(function t(e){var a,i,o,s,c,r=e.store;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],i=[],o={url:"/manage/manage/lists",data:{page:1,psize:20,username:"",realname:"",status:"",start_time:"",end_time:""}},t.next=5,r.dispatch("adminHttpGet",o);case 5:return s=t.sent,c={url:"/manage/acl/role_list",data:{role_name:"",start_time:"",end_time:"",page:1,psize:1e8}},t.next=9,r.dispatch("adminHttpGet",c);case 9:return t.sent.data.data.forEach(function(t,e){a.push(t.role_name),i.push(t.role_id)}),t.abrupt("return",{account_lists:s.data.data,paging:{total:s.data.total,currentPage:1,page_sizes:[10,20,30],page_size:20},role_select:a,role_id_lists:i});case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),methods:{_paging:function(){var t=(0,i.default)(n.default.mark(function t(){var e,a,i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).fullscreenLoading=!0,a={url:"/manage/manage/lists",data:{page:e.paging.currentPage,psize:e.paging.page_size,username:e.search_info.account,realname:e.search_info.name,status:"全部"===e.search_info.account_type?" ":"正常"===e.search_info.account_type?1:0,start_time:e.search_info.time?e.search_info.time[0]:"",end_time:e.search_info.time?e.search_info.time[1]:""}},t.next=5,e.$store.dispatch("adminHttpGet",a);case 5:0===(i=t.sent).code&&(e.fullscreenLoading=!1,e.paging.total=i.data.total,e.account_lists=i.data.data);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleSizeChange:function(t){this.paging.currentPage=1,this.paging.page_size=t,this._paging()},handleCurrentChange:function(t){this.paging.currentPage=t,this._paging()},close_cover:function(){this.cover_show=!1},add_account:function(){if(!this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"manage","add"))return this.$message({message:"警告，您无此权限",type:"warning"}),!1;this.account_info={role_id:"",id:"",account:"",account_disable:!1,pwd:"",pwd_show_type:"txt",pwd_disable:!1,name:"",department:"",type_select:["正常","冻结"],type:"正常",role:"",other_disable:!1},this.account_tit="创建账户";this.account_save_show=!0,this.cover_show=!0,this.account_info.account_disable=!1,this.account_info.pwd="xiangxue123",this.account_info.pwd_show_type="txt",this.account_info.pwd_disable=!1,this.account_info.other_disable=!1,this.account_info.id=""},edit_account:function(t){if(!this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"manage","add"))return this.$message({message:"警告，您无此权限",type:"warning"}),!1;this.account_tit="账户编辑";var e=this.role_id_lists.indexOf(t.role_id),a=this.role_select[e];this.account_info.pwd_show_type="password",this.cover_show=!0,this.account_info.id=t.id,this.account_save_show=!0,this.account_info.account_disable=!0;var n=this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"manage","update_password");this.account_info.pwd_disable=!n,this.account_info.other_disable=!1,this.account_info.account=t.username,this.account_info.pwd="******",this.account_info.name=t.realname,this.account_info.department=t.department,this.account_info.type=1===t.status?"正常":"冻结",this.account_info.role=a},see_account:function(t){var e=this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"manage","info");if(console.log("权限",e),!e)return this.$message({message:"警告，您无此权限",type:"warning"}),!1;var a=this.role_id_lists.indexOf(t.role_id),n=this.role_select[a];this.account_info.pwd_show_type="password",this.cover_show=!0,this.account_save_show=!1,this.account_info.account_disable=!0,this.account_info.pwd_disable=!0,this.account_info.other_disable=!0,this.account_info.account=t.username,this.account_info.pwd="******",this.account_info.name=t.realname,this.account_info.department=t.department,this.account_info.type=1===t.status?"正常":"冻结",this.account_info.role=n},account_save:function(){var t=(0,i.default)(n.default.mark(function t(){var e,a,i,o,s,c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(a=(e=this).role_select.indexOf(e.account_info.role))&&(e.account_info.role_id=e.role_id_lists[a]),i=e.comssr.validatorLen(e.account_info.account,10),""!==e.account_info.account&&""!==e.account_info.pwd&&""!==e.account_info.name&&""!==e.account_info.type&&""!==e.account_info.role){t.next=8;break}e.$message.error("必填项不能为空!"),t.next=22;break;case 8:if(i){t.next=12;break}e.$message.error("账号限制输入20个字符（10个汉字）"),t.next=22;break;case 12:if(!(e.account_info.pwd.length<6||e.account_info.pwd.length>16)){t.next=16;break}e.$message.error("密码必须为6~16位字符"),t.next=22;break;case 16:return o="******"===e.account_info.pwd?"":e.account_info.pwd,s="正常"===e.account_info.type?1:0,t.next=20,e.post_axios("/manage/manage/add",{username:e.account_info.account,password:o,realname:e.account_info.name,role_id:e.account_info.role_id,status:s,department:e.account_info.department,id:e.account_info.id});case 20:0===(c=t.sent).data.code?(e.account_info.account="",e.account_info.pwd="",e.account_info.name="",e.account_info.role_id="",e.account_info.type="",e.account_info.department="",e.account_info.id="",e.cover_show=!1,e.paging.currentPage=1,e.paging.page_size=20,e._paging()):e.$message.error(c.data.message);case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),post_axios:function(){var t=(0,i.default)(n.default.mark(function t(e,a){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,t.abrupt("return",(0,s.default)({url:i.$store.state.admin.baseUrl+e,method:"post",headers:{token:i.$store.state.admin.token},data:a}).then(function(t){return t}).catch(function(t){return t}));case 2:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),setMeau:function(){var t=[],e=this.$store.state.admin.adminRole.data,a=this.comsys.adminGetMeau(e,"manage"),n=this.comsys.adminGetMeau(e,"acl"),i=this.comsys.adminGetMeau(e,"log"),o=[],s=[],c=[];a.length>0&&(o=this.comsys.adminGetMeau(a[0].son,"lists")),n.length>0&&(s=this.comsys.adminGetMeau(n[0].son,"role_list")),i.length>0&&(c=this.comsys.adminGetMeau(i[0].son,"list")),o.length>0&&t.push({name:"员工账号",link:"/admin/account",active:!0}),s.length>0&&t.push({name:"角色管理",link:"/admin/role",active:!1}),c.length>0&&t.push({name:"日志",link:"/admin/log",active:!1}),this.leftNav=t}},mounted:function(){this.setMeau()},head:function(){return{title:"基础设置",meta:[{hid:"description",name:"description",content:"123"}],link:[{href:"/admin/css/account.css",type:"text/css",rel:"stylesheet"}]}}}},Swz8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("LeftNav",{attrs:{data:t.leftNav}}),a("div",{staticClass:"admin-video"},[a("h2",{staticClass:"title"},[t._v("员工账号")]),a("ul",{staticClass:"video-classify"},[a("li",[a("span",[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_info.name,expression:"search_info.name"}],staticClass:"inp",attrs:{type:"text"},domProps:{value:t.search_info.name},on:{input:function(e){e.target.composing||t.$set(t.search_info,"name",e.target.value)}}})]),a("li",[a("span",[t._v("账号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_info.account,expression:"search_info.account"}],staticClass:"inp",attrs:{type:"text"},domProps:{value:t.search_info.account},on:{input:function(e){e.target.composing||t.$set(t.search_info,"account",e.target.value)}}})]),a("li",{staticStyle:{"margin-right":"180px"}},[a("span",[t._v("账号状态")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search_info.account_type,callback:function(e){t.$set(t.search_info,"account_type",e)},expression:"search_info.account_type"}},t._l(t.search_info.account_type_select,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1),a("li",[a("span",[t._v("创建时间")]),a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:t.search_info.time,callback:function(e){t.$set(t.search_info,"time",e)},expression:"search_info.time"}})],1),a("li",{staticClass:"last-li"},[a("span",{staticClass:"video-up",on:{click:t.add_account}},[t._v("创建账号")]),a("span",{staticClass:"video-search",on:{click:t._paging}},[t._v("搜索")])])]),a("table",{staticClass:"video-list"},[t._m(0),a("tbody",t._l(t.account_lists,function(e,n){return a("tr",{key:n},[a("td",{attrs:{width:"80px"}},[t._v(t._s(n+1))]),a("td",{attrs:{width:"150px"}},[t._v(t._s(e.realname))]),a("td",{attrs:{width:"150px"}},[t._v(t._s(e.username))]),a("td",{attrs:{width:"150px"}},[t._v(t._s(null===e.department?"--":e.department))]),a("td",{attrs:{width:"150px"}},[t._v(t._s(e.role_name))]),a("td",{attrs:{width:"250px"}},[t._v(t._s(""===e.created_at||null===e.created_at?"--":e.created_at))]),a("td",{attrs:{width:"250px"}},[t._v(t._s(""===e.last_login_time||null===e.last_login_time?"--":e.last_login_time)+"\n        ")]),a("td",{attrs:{width:"150px"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.status,expression:"item.status === 1"}],staticClass:"col-sure"},[t._v("正常")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.status,expression:"item.status === 0"}],staticClass:"col-error"},[t._v("冻结")])]),a("td",[a("span",{staticClass:"to-edit",on:{click:function(a){t.edit_account(e)}}},[t._v("编辑")]),a("span",{staticClass:"to-look",on:{click:function(a){t.see_account(e)}}},[t._v("查看")])])])}))]),a("div",{staticClass:"paging"},[a("el-pagination",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"current-page":t.paging.currentPage,"page-sizes":t.paging.page_sizes,"page-size":t.paging.page_size,layout:"prev, pager, next, sizes, jumper",total:t.paging.total,"pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.paging,"currentPage",e)}}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cover_show,expression:"cover_show"}],staticClass:"account-cover"},[a("div",{staticClass:"account-cover-con"},[a("span",{staticClass:"close",on:{click:t.close_cover}},[a("img",{attrs:{src:"/admin/images/class/close.png",alt:""}})]),a("h2",[t._v(t._s(t.account_tit))]),a("ul",{staticClass:"cover-detail"},[a("li",[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.account,expression:"account_info.account"}],attrs:{type:"text",maxlength:"20",disabled:t.account_info.account_disable},domProps:{value:t.account_info.account},on:{input:function(e){e.target.composing||t.$set(t.account_info,"account",e.target.value)}}})]),a("li",[t._m(2),"checkbox"===t.account_info.pwd_show_type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.pwd,expression:"account_info.pwd"}],attrs:{disabled:t.account_info.pwd_disable,type:"checkbox"},domProps:{checked:Array.isArray(t.account_info.pwd)?t._i(t.account_info.pwd,null)>-1:t.account_info.pwd},on:{change:function(e){var a=t.account_info.pwd,n=e.target,i=!!n.checked;if(Array.isArray(a)){var o=t._i(a,null);n.checked?o<0&&t.$set(t.account_info,"pwd",a.concat([null])):o>-1&&t.$set(t.account_info,"pwd",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.account_info,"pwd",i)}}}):"radio"===t.account_info.pwd_show_type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.pwd,expression:"account_info.pwd"}],attrs:{disabled:t.account_info.pwd_disable,type:"radio"},domProps:{checked:t._q(t.account_info.pwd,null)},on:{change:function(e){t.$set(t.account_info,"pwd",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.pwd,expression:"account_info.pwd"}],attrs:{disabled:t.account_info.pwd_disable,type:t.account_info.pwd_show_type},domProps:{value:t.account_info.pwd},on:{input:function(e){e.target.composing||t.$set(t.account_info,"pwd",e.target.value)}}})]),a("li",[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.name,expression:"account_info.name"}],attrs:{type:"text",maxlength:"5",disabled:t.account_info.other_disable},domProps:{value:t.account_info.name},on:{input:function(e){e.target.composing||t.$set(t.account_info,"name",e.target.value)}}})]),a("li",[a("span",[t._v("所属部门")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_info.department,expression:"account_info.department"}],attrs:{type:"text",maxlength:"10",disabled:t.account_info.other_disable},domProps:{value:t.account_info.department},on:{input:function(e){e.target.composing||t.$set(t.account_info,"department",e.target.value)}}})]),a("li",[t._m(4),a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:t.account_info.other_disable},model:{value:t.account_info.type,callback:function(e){t.$set(t.account_info,"type",e)},expression:" account_info.type"}},t._l(t.account_info.type_select,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1),a("li",[t._m(5),a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"请选择",disabled:t.account_info.other_disable},model:{value:t.account_info.role,callback:function(e){t.$set(t.account_info,"role",e)},expression:" account_info.role"}},t._l(t.role_select,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.account_save_show,expression:"account_save_show"}],staticClass:"account-save",on:{click:t.account_save}},[t._v("保 存")])])])],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("序号")]),a("th",[t._v("姓名")]),a("th",[t._v("账号")]),a("th",[t._v("所属部门")]),a("th",[t._v("角色")]),a("th",[t._v("创建时间")]),a("th",[t._v("最后登录时间")]),a("th",[t._v("状态")]),a("th",[t._v("操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("label",[this._v("*")]),this._v("账号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("label",[this._v("*")]),this._v("密码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("label",[this._v("*")]),this._v("姓名")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("label",[this._v("*")]),this._v("账号状态")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("label",[this._v("*")]),this._v("角色")])}]};e.a=i},cJuq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("niWl"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var s=a("H8Uz"),c=!1;var r=function(t){c||a("cdzv")},u=a("VU/8")(i.a,s.a,!1,r,null,null);u.options.__file="components\\admin\\LeftNav.vue",e.default=u.exports},cdzv:function(t,e){},niWl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"leftNav",props:["data"],data:function(){return{}},methods:{nav_choose:function(t){var e=this;$.each(e.data,function(a,n){a===t?(n.active=!0,console.log(n.name),e.$store.commit("setNav",n.name)):n.active=!1}),this.$router.push({path:e.data[t].link})}},mounted:function(){for(var t in this.data)this.data[t].link==this.$route.path?(this.data[t].active=!0,this.$store.commit("setNav",this.data[t].name)):this.data[t].active=!1},watch:{data:function(t){for(var e in this.data)this.data[e].link==this.$route.path?(this.data[e].active=!0,this.$store.commit("setNav",this.data[e].name)):this.data[e].active=!1}}}},obSw:function(t,e){}});