webpackJsonp([88],{"00Mc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a("Xxa5")),s=n(a("exGp"));function n(t){return t&&t.__esModule?t:{default:t}}e.default={name:"caseEdit",props:["addInfo","orgInfo"],data:function(){return{rules:{content:[{required:!0,message:"请输入导师秀内容",trigger:"blur"},{validator:this.comssr.validatorLen150,trigger:"blur"}],organization_teacher_id:[{required:!0,message:"请选择导师",trigger:"blur"}],address:[{required:!0,message:"请输入地标",trigger:"blur"},{validator:this.comssr.validatorLen10,trigger:"blur"}]},saveAction:"",chooseImg:"",dialogImageUrl:"",dialogVisible:!1,orgs:[{id:"选项1",name:"黄金糕"},{id:"选项2",name:"双皮奶"},{id:"选项3",name:"蚵仔煎"},{id:"选项4",name:"龙须面"},{value:"选项5",name:"北京烤鸭"}],tchs:[]}},computed:{},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){},save:function(){var t=this;this.$refs.addInfo.validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={btnAaction:"save",visible:!1};t.$emit("editSuccess",a)})},getTch:function(){var t=(0,s.default)(i.default.mark(function t(){var e,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$set(this.addInfo,"organization_teacher_id",null),e={url:"/manage/organization_teacher/list",data:{organization_id:this.addInfo.atOrt,status:1,role:1,page:1,psize:100}},t.next=4,this.$store.dispatch("adminHttpGet",e);case 4:a=t.sent,this.tchs=a.data.data;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.$refs.addInfo.resetFields();var t={btnAaction:"cancel",visible:!1};this.$emit("editSuccess",t)},handleRemove:function(t,e){console.log(t,e)},handleBeforeUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传头像图片大小不能超过 5MB!"),e},handlePictureCardPreview:function(t){console.log(t.url),this.addInfo.images=t.url,this.dialogVisible=!0},handleAvatarSuccess:function(t,e,a){""==this.addInfo.images?this.$set(this.addInfo,"images",e.response.data.filename):this.$set(this.addInfo,"images",this.addInfo.images+","+e.response.data.filename)},setChooseImg:function(t){this.chooseImg=t,console.log(this.chooseImg)}},mounted:function(){}}},DG3N:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_preview"},[a("el-form",{ref:"addInfo",attrs:{model:t.addInfo,rules:t.rules}},[a("el-form-item",{attrs:{label:"导师秀内容","label-width":"100px",prop:"content"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addInfo.content,callback:function(e){t.$set(t.addInfo,"content",e)},expression:"addInfo.content"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-upload",{attrs:{action:t.$store.state.admin.fileAddUrl,headers:{token:t.$store.state.admin.token},"list-type":"picture-card",limit:9,"before-upload":t.handleBeforeUpload,"on-preview":t.handlePictureCardPreview,"on-success":t.handleAvatarSuccess,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.addInfo.images,alt:""}})])],1),a("el-form-item",{attrs:{label:"导师","label-width":"100px",prop:"organization_teacher_id"}},[a("el-select",{attrs:{placeholder:"请选择机构"},on:{change:t.getTch},model:{value:t.addInfo.atOrt,callback:function(e){t.$set(t.addInfo,"atOrt",e)},expression:"addInfo.atOrt"}},t._l(t.orgInfo,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),a("el-select",{attrs:{placeholder:"请选择导师","no-data-text":"该机构暂无导师"},model:{value:t.addInfo.organization_teacher_id,callback:function(e){t.$set(t.addInfo,"organization_teacher_id",e)},expression:"addInfo.organization_teacher_id"}},t._l(t.tchs,function(t){return a("el-option",{key:t.id,attrs:{label:t.realname,value:t.id}})}))],1),a("el-form-item",{attrs:{label:"地标","label-width":"100px",prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addInfo.address,callback:function(e){t.$set(t.addInfo,"address",e)},expression:"addInfo.address"}})],1)],1),a("div",{staticClass:"clr"}),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancel()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("确 定")])],1)],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[]};e.a=s},MZmb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("mvHQ")),s=o(a("Xxa5")),n=o(a("exGp")),r=o(a("qnpe"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={layout:"admin",name:"admin_body",components:{tchShowEdit:r.default},data:function(){return{addInfo:{teacher:{photo_small:{}}},addInfoMore:[{title:"",content:""}],addInfoSamllThumb:"",addInfoBigThumb:"",status:[{id:0,name:"全部"},{id:1,name:"正常"},{id:2,name:"否"}],feedBackType:[{id:0,name:"全部"},{id:1,name:"软件出错"},{id:2,name:"账号申诉"}],searchFilter:{},dialogTableVisible:!1,dialogFormVisible:!1,dialogPicVisible:!1,picView:"",formLabelWidth:"120px",saveAction:"",choose:null,orgInfo:[]}},asyncData:function(){var t=(0,n.default)(s.default.mark(function t(e){var a,i,n=e.store;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={url:"/manage/organization_teacher_show/list",data:{page:1,psize:20}},t.next=3,n.dispatch("adminHttpGet",a);case 3:return i=t.sent,t.abrupt("return",{updateInfo:i.data.data,pageInfo:{total:i.data.total,pageSizes:[10,20,30,400],pageSize:20,currentPage:parseInt(i.data.page)}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),created:function(){},methods:{setPic:function(t){this.picView=t,this.dialogPicVisible=!0},see:function(t){this.choose=t,this.saveAction="edit",this.addInfo=this.updateInfo[t],console.log(this.addInfo),this.dialogTableVisible=!0},add:function(){var t=(0,n.default)(s.default.mark(function t(){var e,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"organization_teacher_show","add")){t.next=4;break}return this.$message({message:"警告，您无此权限",type:"warning"}),t.abrupt("return",!1);case 4:return this.addInfo={},this.$set(this.addInfo,"images",""),this.saveAction="add",e={url:"/manage/organization/list",data:{status:1,role:1,page:1,psize:100}},t.next=10,this.$store.dispatch("adminHttpGet",e);case 10:a=t.sent,this.orgInfo=a.data.data,this.dialogFormVisible=!0;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),edit:function(t){this.choose=t,this.saveAction="edit",this.addInfo=JSON.parse((0,i.default)(this.updateInfo[t])),this.addInfoMore=JSON.parse((0,i.default)(this.updateInfo[t].more)),this.dialogFormVisible=!0},del:function(){var t=(0,n.default)(s.default.mark(function t(e){var a=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"organization_teacher_show","del")){t.next=4;break}return this.$message({message:"警告，您无此权限",type:"warning"}),t.abrupt("return",!1);case 4:this.$confirm("此操作将删除该导师秀, 是否继续?","风险操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((0,n.default)(s.default.mark(function t(){var i,n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i={}).id=a.updateInfo[e].id,n={url:"/manage/organization_teacher_show/del",data:i},t.next=5,a.$store.dispatch("adminHttpPost",n);case 5:t.sent,a.setData(),a.$message({type:"success",message:"删除成功!"});case 8:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),editSuccess:function(){var t=(0,n.default)(s.default.mark(function t(e){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dialogFormVisible=e.visible,"save"!=e.btnAaction){t.next=7;break}return a={url:"/manage/organization_teacher_show/add",data:this.addInfo},t.next=5,this.$store.dispatch("adminHttpPost",a);case 5:t.sent,this.setData();case 7:console.log(this.addInfo);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleSizeChange:function(t){this.pageInfo.pageSize=t,this.setData()},handleCurrentChange:function(t){this.pageInfo.currentPage=t,this.setData()},sortByKey:function(t,e){return t.sort(function(t,a){var i=t[e],s=a[e];return i<s?-1:i>s?1:0})},handleAvatarSuccess:function(t,e,a){this.addInfo.logo=URL.createObjectURL(e.raw)},setData:function(){var t=(0,n.default)(s.default.mark(function t(){var e,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchFilter.page=this.pageInfo.currentPage,this.searchFilter.psize=this.pageInfo.pageSize,e={url:"/manage/organization_teacher_show/list",data:this.searchFilter},t.next=5,this.$store.dispatch("adminHttpGet",e);case 5:a=t.sent,console.log(a),this.pageInfo.page=parseInt(a.data.page),this.pageInfo.total=a.data.total,this.updateInfo=a.data.data;case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{},mounted:function(){},head:function(){return{link:[{href:"/css/css.css",type:"text/css",rel:"stylesheet"},{href:"/static/css/bootstrap.css",type:"text/css",rel:"stylesheet"}]}}}},"fNt/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("MZmb"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);var r=a("sI7f"),o=a("VU/8")(s.a,r.a,!1,null,null,null);o.options.__file="pages\\admin\\orgAndTch\\tchShow.vue",e.default=o.exports},qnpe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("00Mc"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);var r=a("DG3N"),o=a("VU/8")(s.a,r.a,!1,null,null,null);o.options.__file="components\\admin\\orgAndTch\\tchShowEdit.vue",e.default=o.exports},sI7f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_update"},[a("div",{staticClass:"app_update_setting"},[t._m(0),a("div",{staticClass:"searchFilter"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchFilter}},[a("el-form-item",{attrs:{label:"导师姓名","label-width":"80px"}},[a("el-input",{attrs:{clearable:"","auto-complete":"off"},model:{value:t.searchFilter.realname,callback:function(e){t.$set(t.searchFilter,"realname",e)},expression:"searchFilter.realname"}})],1),a("el-form-item",{attrs:{label:"发布时间","label-width":"80px"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期"},model:{value:t.searchFilter.create_start_time,callback:function(e){t.$set(t.searchFilter,"create_start_time",e)},expression:"searchFilter.create_start_time"}}),t._v(" -\r\n          "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期"},model:{value:t.searchFilter.create_end_time,callback:function(e){t.$set(t.searchFilter,"create_end_time",e)},expression:"searchFilter.create_end_time"}})],1),a("el-form-item",{staticClass:"fRight"},[a("el-button",{staticClass:"btn_create",on:{click:function(e){t.add()}}},[t._v("发布导师秀")]),a("el-button",{staticClass:"btn_search",on:{click:function(e){t.setData()}}},[t._v("搜索")])],1)],1)],1),t._l(t.updateInfo,function(e,i){return a("div",{key:i,staticClass:"tch_show"},[a("div",{staticClass:"tch_show_binfo"},[a("span",{staticClass:"tch_show_img"},[a("img",{attrs:{src:e.teacher.photo_small.value}})]),a("span",{staticClass:"tch_show_title"},[t._v(t._s(e.teacher.realname))]),a("span",{staticClass:"tch_show_honer"},[t._v(t._s(e.teacher.title))]),e.teacher.organization?a("span",{staticClass:"tch_show_atOrg"},[t._v(t._s(e.teacher.organization.title))]):t._e(),a("span",{staticClass:"tch_show_time"},[t._v(t._s(e.created_at))])]),a("div",{staticClass:"tch_show_content"},[t._v(t._s(e.content))]),a("div",{staticClass:"tch_show_imgs"},[a("ul",t._l(e.images,function(e,i){return a("li",{key:i},[a("img",{attrs:{src:e.value},on:{click:function(a){t.setPic(e.value)}}})])}))]),a("div",{staticClass:"tch_show_address"},[t._v("\r\n        "+t._s(e.address)+"\r\n      ")]),a("div",{staticClass:"tch_show_del",on:{click:function(e){t.del(i)}}},[t._v("×")])])}),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.currentPage,"page-sizes":t.pageInfo.pageSizes,"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2),t.dialogFormVisible?a("el-dialog",{attrs:{title:("edit"==t.saveAction?"编辑":"添加")+"发布导师秀",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("tchShowEdit",{attrs:{addInfo:t.addInfo,orgInfo:t.orgInfo},on:{editSuccess:t.editSuccess}})],1):t._e(),t.dialogPicVisible?a("el-dialog",{attrs:{title:"图片预览",visible:t.dialogPicVisible,"append-to-body":"",width:"80%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogPicVisible=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.picView}})])]):t._e()],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app_update_title"},[e("div",{staticClass:"title"},[this._v("\r\n          导师秀\r\n       ")])])}]};e.a=s}});