webpackJsonp([87],{"5LkU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("bzf3"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var r=a("8SvJ"),l=a("VU/8")(s.a,r.a,!1,null,null,null);l.options.__file="pages\\mine\\mine\\mine07message\\system.vue",t.default=l.exports},"8SvJ":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mine-message-system clearfix"},[a("div",{staticClass:"cursor-pointer msg-read-all",on:{click:e.read_all}},[e._v("全部标记为已读")]),e._m(0),a("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.news.data,function(t,n){return a("li",{key:n,staticClass:"msg-li"},[a("nuxt-link",{attrs:{to:"./"+t.id}},[a("div",{staticClass:"d-inline-block msg-msg",attrs:{title:t.message.title}},[e._v(e._s(t.message.title)),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.is_read,expression:"!item.is_read"}],staticClass:"msg-read"},[e._v("·")])]),a("div",{staticClass:"d-inline-block text-right msg-time"},[e._v(e._s(e._f("y-m-d")(t.created_at)))])])],1)})),e.news.total?a("paging",{attrs:{page_total:e.news.page_total,current:e.p},on:{pageChange:e.pageChange}}):e._e()],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mine-title"},[t("div",{staticClass:"h-title"},[this._v("系统消息")])])}]};t.a=s},CqmE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(a("ynF4"));t.default={name:"dataPaging",props:{page_total:{type:Number,default:1},current:{type:Number}},methods:{}}},bzf3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a("Xxa5")),s=r(a("exGp")),i=r(a("ynF4"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={name:"system",data:function(){return{p:1,loading:!1}},components:{paging:i.default},asyncData:function(){var e=(0,s.default)(n.default.mark(function e(t){var a,s=t.store;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.dispatch("mineGet",{url:"/app/personal/message_list",data:{page:1,psize:2}});case 2:return a=e.sent,console.log("消息",a),e.abrupt("return",{news:a.data});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),methods:{read_all:function(){var e=(0,s.default)(n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("mineGet",{url:"/app/personal/message_read_all"});case 2:t=e.sent,console.log("已读？",t),0===t.code&&this.pageChange(this.p);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pageChange:function(){var e=(0,s.default)(n.default.mark(function e(t){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.p=t,e.next=4,this.$store.dispatch("mineGet",{url:"/app/personal/message_list",data:{page:t,psize:2}});case 4:0===(a=e.sent).code&&(this.news=a.data,this.loading=!1);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}},sl4X:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-right paging"},[a("ul",[a("li",{staticClass:"d-inline-block to"},[1!=e.current?a("a",{staticStyle:{color:"#333"},on:{click:function(t){e.$emit("pageChange",1)}}},[e._v("首页")]):a("a",[e._v("首页")])]),e._l(e.page_total,function(t,n){return a("li",{key:n,staticClass:"paging-li d-inline-block",class:{"paging-li-active":e.current==n+1}},[e.current!=t?a("a",{staticStyle:{color:"#333"},on:{click:function(a){e.$emit("pageChange",t)}}},[e._v(e._s(t))]):a("a",{class:{active:e.current==n+1}},[e._v(e._s(t))])])}),a("li",{staticClass:"d-inline-block to"},[e.current!=e.page_total?a("a",{staticStyle:{color:"#333"},on:{click:function(t){e.$emit("pageChange",e.page_total)}}},[e._v("尾页")]):a("a",[e._v("尾页")])])],2)])};n._withStripped=!0;var s={render:n,staticRenderFns:[]};t.a=s},ynF4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("CqmE"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var r=a("sl4X"),l=a("VU/8")(s.a,r.a,!1,null,null,null);l.options.__file="components\\dataPaging.vue",t.default=l.exports}});