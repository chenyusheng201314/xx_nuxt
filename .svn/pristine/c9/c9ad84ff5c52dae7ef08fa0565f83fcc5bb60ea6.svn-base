webpackJsonp([145],{jMlU:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app_index"},[n("div",{staticClass:"app_index_setting"},[n("div",{staticClass:"admin_setting_title"},[n("div",{staticClass:"title"},[t._v("\n          搜索框配置\n       ")]),t.indexInfo.searchInfo.length<10?n("div",{staticClass:"btn",on:{click:t.addM}},[n("img",{attrs:{src:"/admin/images/app_index_add.png"}}),t._v(" 添加热词\n       ")]):n("div",{staticClass:"btn",staticStyle:{background:"#F2F2F2",color:"#BCBCBC"}},[n("img",{attrs:{src:"/admin/images/app_index_add.png"}}),t._v(" 添加热词\n       ")])]),n("div",{staticClass:"tip_search"},[t._v("\n        搜索框提示文案 :\n        "),n("el-input",{attrs:{"auto-complete":"off"},on:{blur:function(e){t.updateTip()}},model:{value:t.indexInfo.searchTip.value,callback:function(e){t.$set(t.indexInfo.searchTip,"value",e)},expression:"indexInfo.searchTip.value"}})],1),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table"},[n("tbody",[t._m(0),t._l(t.sortSearchInfo,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(s+1))]),n("td",[n("el-input",{attrs:{"auto-complete":"off",maxlength:"10"},model:{value:e.title,callback:function(n){t.$set(e,"title",n)},expression:"kw.title"}})],1),n("td",[n("span",{staticClass:"btn_del",on:{click:function(e){t.delKw(s)}}},[t._v("删除")])]),n("td",[0!=s?n("img",{staticClass:"btn_sort",attrs:{src:"/admin/images/app_index_up.png"},on:{click:function(e){t.setSortUp(s)}}}):t._e(),t.indexInfo.searchInfo.length!=s+1?n("img",{attrs:{src:"/admin/images/app_index_down.png"},on:{click:function(e){t.setSortDown(s)}}}):t._e()])])})],2)])]),n("div",{staticClass:"app_index_setting_btn"},[n("span",{staticClass:"back",on:{click:function(e){t.back()}}},[t._v("返回")]),n("span",{on:{click:t.submit}},[t._v("保存")])])])])};s._withStripped=!0;var a={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{attrs:{width:"25%"}},[this._v("序号")]),e("th",{attrs:{width:"25%"}},[this._v("热词")]),e("th",{attrs:{width:"25%"}},[this._v("操作")]),e("th",{attrs:{width:"25%"}},[this._v("排序")])])}]};e.a=a},kIOp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("rLaK"),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);var r=n("jMlU"),o=n("VU/8")(a.a,r.a,!1,null,null,null);o.options.__file="pages\\admin\\app\\index\\setSearch.vue",e.default=o.exports},rLaK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(n("mvHQ")),a=r(n("Xxa5")),i=r(n("exGp"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={layout:"admin",name:"admin_body",props:["indexInfo","indexInfoBack"],data:function(){return{}},asyncData:function(){var t=(0,i.default)(a.default.mark(function t(e){var n,s,i=e.store;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={url:"/manage/app_hot_search/list",data:{}},t.next=3,i.dispatch("adminHttpGet",n);case 3:return s=t.sent,t.abrupt("return",{keywords:s.data});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),methods:{back:function(){this.$set(this.indexInfo,"searchInfo",JSON.parse((0,s.default)(this.indexInfoBack.searchInfo))),this.$router.push({name:"admin-app-index"})},updateTip:function(){var t=(0,i.default)(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"app_hot_search","message_update")){t.next=4;break}return this.$message({message:"警告，您无此权限",type:"warning"}),t.abrupt("return",!1);case 4:return e={url:"/manage/app_hot_search/message_update",data:{message:this.indexInfo.searchTip.value}},t.next=7,this.$store.dispatch("adminHttpPost",e);case 7:n=t.sent,console.log(n),0==n.code?this.$message({message:"搜索框提示文案保存成功",type:"success"}):this.$message.error("搜索框提示文案保存失败");case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setting:function(){this.$refs.layer.open({type:0,shadeClose:!0})},addM:function(){if(!this.comsys.adminCheckRole(this.$store.state.admin.adminRole.data,"app_hot_search","add"))return this.$message({message:"警告，您无此权限",type:"warning"}),!1;if(this.indexInfo.length>0)var t=this.indexInfo.searchInfo[this.indexInfo.searchInfo.length-1].order_num+1;this.indexInfo.searchInfo.push({title:"",order_num:t})},delKw:function(t){this.indexInfo.searchInfo.splice(t,1)},submit:function(){var t=(0,i.default)(a.default.mark(function t(){var e,n,i,r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n in console.log(this.indexInfo.searchInfo),e=!1,this.indexInfo.searchInfo)""===this.indexInfo.searchInfo[n].title&&(e=!0);if(!e){t.next=6;break}return this.$message.error("所有热词信息不能为空"),t.abrupt("return",!1);case 6:return i={url:"/manage/app_hot_search/add",data:{data:(0,s.default)(this.indexInfo.searchInfo)}},t.next=9,this.$store.dispatch("adminHttpPost",i);case 9:r=t.sent,console.log(r),0==r.code?(this.$message({message:"保存成功",type:"success"}),this.$set(this.indexInfoBack,"searchInfo",JSON.parse((0,s.default)(this.indexInfo.searchInfo)))):this.$message.error("保存失败");case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),setSortUp:function(t){var e=JSON.parse((0,s.default)(this.indexInfo.searchInfo[t].order_num));this.$set(this.indexInfo.searchInfo[t],"order_num",JSON.parse((0,s.default)(this.indexInfo.searchInfo[t-1].order_num))),this.$set(this.indexInfo.searchInfo[t-1],"order_num",e)},setSortDown:function(t){var e=JSON.parse((0,s.default)(this.indexInfo.searchInfo[t].order_num));this.$set(this.indexInfo.searchInfo[t],"order_num",JSON.parse((0,s.default)(this.indexInfo.searchInfo[t+1].order_num))),this.$set(this.indexInfo.searchInfo[t+1],"order_num",e)},sortByKey:function(t,e){return t.sort(function(t,n){var s=t[e],a=n[e];return s<a?-1:s>a?1:0})}},computed:{sortSearchInfo:function(){return this.sortByKey(this.indexInfo.searchInfo,"order_num")}},mounted:function(){}}}});